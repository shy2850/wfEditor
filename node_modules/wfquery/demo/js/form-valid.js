!function(e){e.stringCtoh=function(e){e=e?""+e:"";for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(12288!=e.charCodeAt(n)?e.charCodeAt(n)>65280&&e.charCodeAt(n)<65375?e.charCodeAt(n)-65248:e.charCodeAt(n):e.charCodeAt(n)-12256);return t},e.form=e.form||{},e.extend(e.form,{settings:{initTip:function(t,n){t.after(e("<span class='tip tip-default'></span>").text(n||""))},validTip:function(e,t,n){t?e.next().removeClass("tip-default").addClass("tip-error").text(t):e.next().removeClass("tip-error").addClass("tip-default").text(n||"")}},regValids:{alpha:/^[A-Za-z]+$/,alphanumber:/^[A-Za-z0-9]+$/,integer:/^\d+$/,number:/^[+-]?(\d+(\.\d*)?|\.\d+)([Ee]-?\d+)?$/,mobile:/^1[3458]\d{9}$/,email:/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/,chinese:/^[\u4e00-\u9fa5]*$/},valid:function(t,n){t=t||{};var i={},r="",a={};if(t.vReturn="",!t.data("validater")&&!n)return"";i=e.extend(i,t.data("validater"),n),r=t.val(),i.trim!==!1&&(r=e.trim(r),t.val(r)),i.stringCtoh===!0&&(r=e.stringCtoh(r),t.val(r)),i.begin&&"function"==typeof i.begin&&(r=i.begin(t));var o=r||"";return i.showName=i.showName||"",i.required||0!=o.length?i.required&&0==o.length?t.vReturn=i.requiredTip||i.showName+"不能为空":i.len&&o.length!=i.len?t.vReturn=i.lenTip||i.showName+"长度必须为:"+i.len:i.minlen&&o.length<i.minlen?t.vReturn=i.lenTip||i.showName+"长度不小于： "+i.minlen:i.maxlen&&o.length>i.maxlen?t.vReturn=i.lenTip||i.showName+"长度不超过 ："+i.maxlen:i.regexp&&!i.regexp.test(o)?t.vReturn=i.errorTip||i.showName+"验证不通过":i.validFun&&"function"==typeof i.validFun&&(a=i.validFun(r,t),t.vReturn=a.errorInfo):t.vReturn="",t.vReturn?i.failed&&"function"==typeof i.failed&&i.failed(t,a):i.success&&"function"==typeof i.success&&i.success(t,a),i.end&&"function"==typeof i.end&&i.end(t,a),t.vReturn},validTip:function(t){var n=e(t).data("validater")||{};if(n.type){var i=this.regValids[n.type];i&&(i instanceof RegExp?n.regexp=i:"function"==typeof i?n.regexp=i(n):"function"==typeof i.check&&(n.validFun=function(e){return i.check.call(i,e)}))}e(t).each(function(){e.form.settings.initTip(e(this),n.defaultTip),e(this).on(n.option||"noListenner",function(){n.before&&"function"==typeof n.before&&n.before(e(this));var t=e.form.valid(e(this),n);e.form.settings.validTip(e(this),t,n.defaultTip),n.after&&"function"==typeof n.after&&n.after(e(this),t)})})},render:function(t,n){for(var i in t){var r=t[i]||{},a=e(i).data("validater")||{};e.extend(a,n),e(i).data("validater",a),this.validTip(i,e.extend(a,r))}}}),e.fn.extend({valid:function(t){return e.form.valid(this,t)},formValid:function(t,n,i){var r="",a=null,i=i||e.form.settings;return n=n||{},this.find(t||"[name]").each(function(){if(!n.interrupt||!a){var t=e(this).valid(n.get?n.get(this.name):n);r+=t,t&&!a&&(a=e(this),a.focus().blur()),i.validTip(e(this),t)}}),r?!1:!0},validAttr:function(t,n){var i=this.data("validater")||{};return"object"==typeof t?(e.extend(i,t),this):t&&n?(i[t]=n,this):t?i[t]:i}})}(wfQuery);