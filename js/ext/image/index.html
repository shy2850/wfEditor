<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>wfEditor</title>
    <link rel="stylesheet" href="../../../../libs/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../../libs/fontawesome/4.2.0/css/font-awesome.min.css">
    <script src="../../../../libs/require.js/2.1.11/require.min.js"></script>
    <style>
        .tab-pane{
            padding: .5em;
        }
        #upload{
            position: relative;
        }
        .image-input{
            width: 300px;
            display: inline-block;
            float: right;
        }
        .img-thumbnail{
            max-width: 60%;
            max-height: 150px;
        }
    </style>
</head>
<body>
    <div>
      <!-- Nav tabs -->
      <ul class="nav nav-tabs">
        <li class="active"><a href="#insert">直接插入</a></li>
        <li><a href="#search">图片库</a></li>
        <li><a href="#baidu">百度检索</a></li>
      </ul>

      <!-- Tab panes -->
      <div class="tab-content">
        <div class="tab-pane active" id="insert">
            <div class="form-group">
                <button type="button" class="btn btn-info image-upload">点击上传</button> 或
                <input type="text" class="form-control image-input" placeholder="直接粘贴图片地址"/>
            </div>
    
            <div class="form-group text-center">
                <img src="/placeholder.jpg" alt="占位图" class="img-thumbnail">                
            </div>
        </div>
        <div class="tab-pane" id="search">...</div>
        <div class="tab-pane" id="baidu">...</div>
      </div>

    </div>

<script>
require.config({
    baseUrl: "../../",
    paths: {
        "wf": "../node_modules/wfquery/js/wfQuery"
    }
});
require(["wf","util/frameUpload/index"], function($, FrameUpload){
    var imgBtn = $(".image-upload");

    $(".nav-tabs").on("click", "li>a",function(){
        var t = $(this), 
            p = t.parent();
        p.addClass("active").siblings().removeClass("active");
        $( t.attr("href") ).addClass("active").siblings().removeClass("active");
    });


    var uploader = new FrameUpload({
        el: imgBtn[0],
        action: "/f2e/imageUpload.html?uploadUrl=/f2e/upload/",
        onchange: function(){
            this.submit();
            imgBtn.html("图片上传中");
        },
        afterUpload: function(data){
            imgBtn.html("上传图片");
            //document.execCommand('InsertImage', false, data.imgUrl);
        }
    });
});
// require(["base/index"]);
</script>
</body>
</html>